<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formulario Estomatolog칤a</title>
  <link rel="stylesheet" href="Formato.css" />
</head>
<body>
  <!-- Encabezado -->
  <header class="site-header" role="banner">
    <img id="logo-sesver" src="Logos/sesver.png" alt="Logo SESVER"
         onerror="this.style.display='none';" />
  </header>

  <!-- P치gina 1 -->
  <div id="page1" class="page activo">
    <div class="card">
      <h1 class="page-title">Formulario Estomatolog칤a</h1>
      <h2>Selecciona la categor칤a</h2>

      <!-- Campo con autocompletado -->
      <div class="hospital-row" style="margin-bottom:12px; display:flex; gap:8px; align-items:center;">
        <label for="hospitalNombre" style="min-width:160px; font-weight:600;">Nombre del hospital:</label>
        <input list="listaHospitales" id="hospitalNombre" name="hospitalNombre"
               placeholder="Escribe o selecciona el hospital..."
               aria-label="Nombre del hospital"
               style="flex:1; padding:8px; border-radius:6px; border:1px solid #cbd5e1;" />
        <datalist id="listaHospitales"></datalist>
      </div>

      <select id="categoria" aria-label="Selecciona categor칤a">
        <option value="">--Seleccione--</option>
        <option value="insumos">Insumos</option>
        <option value="material">Material</option>
        <option value="equipo">Equipo m칠dico</option>
        <option value="mobiliario">Mobiliario</option>
        <option value="bienesInformaticos">Bienes inform치ticos</option>
        <option value="instrumental">Instrumental</option>
      </select>

      <div class="actions" style="margin-top:12px; display:flex; justify-content:flex-end;">
        <button id="btnSiguiente">Siguiente</button>
      </div>
    </div>
  </div>

  <!-- P치gina 2 -->
  <div id="page2" class="page oculto">
    <div class="card">
      <h2 id="tituloCategoria">Formulario</h2>

      <div class="controls">
        <button id="btnRegresar1">Regresar</button>
        <button id="btnAgregarFila">Agregar fila</button>
        <button id="btnEnviarInsumos">Enviar</button>
      </div>

      <table id="tablaInsumos" aria-label="Tabla de insumos">
        <thead>
          <tr>
            <th>No.</th>
            <th>Clave</th>
            <th>Descripci칩n</th>
            <th>Stock</th>
            <th>M칤nimo</th>
            <th>Estado</th>
            <th>Caducidad</th>
            <th>D칤as restantes</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

  <script>
  // 游댳 Al cargar la p치gina, obtenemos la lista de hospitales del servidor
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      const response = await fetch("http://localhost:3000/hospitales");
      if (!response.ok) throw new Error("No se pudo obtener la lista de hospitales");
      const hospitales = await response.json();

      const lista = document.getElementById("listaHospitales");
      hospitales.forEach(h => {
        const option = document.createElement("option");
        option.value = h.nombre;
        lista.appendChild(option);
      });
    } catch (err) {
      console.error("Error cargando hospitales:", err);
    }
  });
  </script>

  <script src="Logica.js"></script>
</body>
</html>
