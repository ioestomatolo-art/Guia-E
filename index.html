<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Formulario Estomatolog√≠a</title>
  <link rel="stylesheet" href="Formato.css" />
</head>
<body>
  <!-- Encabezado -->
  <header class="site-header" role="banner">
    <img id="logo-sesver" src="Logos/sesver.png" alt="Logo SESVER"
         onerror="this.style.display='none';" />
  </header>

  <!-- P√°gina 1 -->
  <div id="page1" class="page activo">
    <div class="card">
      <h1 class="page-title">Formulario Estomatolog√≠a</h1>
      <h2>Selecciona la categor√≠a</h2>

      <div class="hospital-row" style="margin-bottom:12px; display:flex; gap:8px; align-items:center;">
        <label for="hospitalNombre" style="min-width:160px; font-weight:600;">Nombre del hospital:</label>
        <input list="listaHospitales" id="hospitalNombre" name="hospitalNombre"
               placeholder="Escribe o selecciona el hospital..."
               aria-label="Nombre del hospital"
               style="flex:1; padding:8px; border-radius:6px; border:1px solid #cbd5e1;" />
        <datalist id="listaHospitales"></datalist>
      </div>

      <select id="categoria" aria-label="Selecciona categor√≠a">
        <option value="">--Seleccione--</option>
        <option value="insumos">Insumos</option>
        <option value="material">Material</option>
        <option value="equipo">Equipo m√©dico</option>
        <option value="mobiliario">Mobiliario</option>
        <option value="bienesInformaticos">Bienes inform√°ticos</option>
        <option value="instrumental">Instrumental</option>
      </select>

      <div class="actions" style="margin-top:12px; display:flex; justify-content:flex-end;">
        <button id="btnSiguiente">Siguiente</button>
      </div>
    </div>
  </div>

  <!-- P√°gina 2 (sin botones superiores duplicados) -->
  <div id="page2" class="page oculto">
    <div class="card">
      <h2 id="tituloCategoria">Formulario</h2>

      <!-- NOTA: remov√≠ los botones duplicados que estaban arriba para evitar confusi√≥n.
           Los botones funcionales (Regresar, Agregar fila, Agregar no listado, Enviar)
           los dejamos aqu√≠ debajo de la tabla para que sean √∫nicos. -->

      <table id="tablaInsumos" aria-label="Tabla de insumos">
        <thead>
          <tr>
            <th>No.</th>
            <th>Clave</th>
            <th>Descripci√≥n</th>
            <th>Stock</th>
            <th>M√≠nimo</th>
            <th>Estado</th>
            <th>Caducidad</th>
            <th>D√≠as restantes</th>
            <th>Observaciones</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!-- controles REALES (abajo) -->
      <div class="controls" style="margin-top:12px; display:flex; gap:10px; justify-content:flex-end; align-items:center;">
        <button id="btnRegresar1">Regresar</button>
        <button id="btnAgregarFila">Agregar fila</button>
        <button id="btnAgregarManual">Agregar no listado</button>
        <button id="btnEnviarInsumos">Enviar</button>
        <!-- El bot√≥n "Eliminar seleccionados" ser√° creado por JS si no existe; pero lo incluyo tambi√©n aqu√≠ por si prefieres -->
        <button id="btnEliminarSeleccionados" style="background:#fee2e2; color:#7f1d1d; border:none; padding:8px 12px; border-radius:8px;">Eliminar seleccionados</button>
      </div>
    </div>
  </div>

  <script>
  // üîπ Al cargar la p√°gina, obtenemos la lista de hospitales del servidor (tu script original)
  document.addEventListener("DOMContentLoaded", async () => {
    try {
      const response = await fetch("http://localhost:3000/hospitales");
      if (!response.ok) throw new Error("No se pudo obtener la lista de hospitales");
      const hospitales = await response.json();

      const lista = document.getElementById("listaHospitales");
      hospitales.forEach(h => {
        const option = document.createElement("option");
        option.value = h.nombre;
        lista.appendChild(option);
      });
    } catch (err) {
      console.error("Error cargando hospitales:", err);
    }
  });
  </script>

  <script src="Logica.js"></script>
</body>
</html>
